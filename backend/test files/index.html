<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Volume Analytics Terminal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/style.css">
    <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
    <script defer src="../static/js/dashboard.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

<!-- Animated Background -->
<div class="bg-grid"></div>
<div class="bg-gradient"></div>

<!-- Header -->
<header class="navbar">
    <div class="navbar-left">
        <div class="logo">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" fill="url(#logo-gradient)"/>
                <defs>
                    <linearGradient id="logo-gradient" x1="3" y1="3" x2="21" y2="21">
                        <stop offset="0%" stop-color="#00f0ff"/>
                        <stop offset="100%" stop-color="#ff00ea"/>
                    </linearGradient>
                </defs>
            </svg>
            <span>VOLUME ANALYTICS</span>
        </div>
        <div class="market-status">
            <span class="status-dot"></span>
            <span>MARKET OPEN</span>
        </div>
    </div>
    <div class="navbar-right">
        <div class="time-display" id="timeDisplay">--:--:--</div>
        <div class="connection-status">
            <div class="signal-bars">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
            <span>LIVE</span>
        </div>
    </div>
</header>

<div class="container">

    <!-- Main Market Panel -->
    <div class="panel market-panel">
        <div class="panel-header">
            <div class="header-left">
                <h2>NIFTY 50</h2>
                <span class="subtitle">Volume Analytics Dashboard</span>
            </div>
            <div class="header-right">
                <button class="filter-btn active">ALL</button>
                <button class="filter-btn">HIGH VOLUME</button>
                <button class="filter-btn">ALERTS</button>
            </div>
        </div>

        <div class="table-container">
            <table class="market-table">
                <thead>
                    <tr>
                        <th>SYMBOL</th>
                        <th>LIVE VOLUME</th>
                        <th>PREV DAY</th>
                        <th>WEEKLY AVG</th>
                        <th>MONTHLY AVG</th>
                        <th>MOVEMENT</th>
                        <th>STATUS</th>
                        <th>ACTION</th>
                    </tr>
                </thead>
                <tbody id="market-body">
                    <!-- Sample rows for demonstration -->
                    <tr>
                        <td class="symbol-cell">
                            <span class="symbol-name">RELIANCE</span>
                        </td>
                        <td class="num">2,847,392</td>
                        <td class="num">2,345,678</td>
                        <td class="num">2,567,234</td>
                        <td class="num">2,789,456</td>
                        <td class="movement">
                            <span class="movement-value positive">+21.4%</span>
                            <div class="movement-bar">
                                <div class="movement-fill positive" style="width: 75%"></div>
                            </div>
                        </td>
                        <td><span class="status-badge status-high">HIGH</span></td>
                        <td>
                            <button class="chart-btn" onclick="openChart('RELIANCE')">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M0 14h16v2H0v-2zm3-3h2v3H3v-3zm4-4h2v7H7V7zm4-4h2v11h-2V3z"/>
                                </svg>
                            </button>
                        </td>
                    </tr>
                    <tr class="alert-row">
                        <td class="symbol-cell">
                            <span class="symbol-name">TCS</span>
                        </td>
                        <td class="num">1,923,456</td>
                        <td class="num">987,654</td>
                        <td class="num">1,123,456</td>
                        <td class="num">1,234,567</td>
                        <td class="movement">
                            <span class="movement-value positive">+94.8%</span>
                            <div class="movement-bar">
                                <div class="movement-fill spike" style="width: 95%"></div>
                            </div>
                        </td>
                        <td><span class="status-badge status-spike">SPIKE</span></td>
                        <td>
                            <button class="chart-btn" onclick="openChart('TCS')">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M0 14h16v2H0v-2zm3-3h2v3H3v-3zm4-4h2v7H7V7zm4-4h2v11h-2V3z"/>
                                </svg>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td class="symbol-cell">
                            <span class="symbol-name">HDFC BANK</span>
                        </td>
                        <td class="num">3,456,789</td>
                        <td class="num">3,234,567</td>
                        <td class="num">3,345,678</td>
                        <td class="num">3,456,789</td>
                        <td class="movement">
                            <span class="movement-value positive">+6.9%</span>
                            <div class="movement-bar">
                                <div class="movement-fill positive" style="width: 35%"></div>
                            </div>
                        </td>
                        <td><span class="status-badge status-normal">NORMAL</span></td>
                        <td>
                            <button class="chart-btn" onclick="openChart('HDFCBANK')">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M0 14h16v2H0v-2zm3-3h2v3H3v-3zm4-4h2v7H7V7zm4-4h2v11h-2V3z"/>
                                </svg>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Side Panel -->
    <div class="side-panel">
        
        <!-- System Logs -->
        <div class="panel logs-panel">
            <div class="panel-header">
                <h3>SYSTEM LOGS</h3>
                <span class="log-count">3 new</span>
            </div>
            <div class="logs-container" id="logs">
                <div class="log log-info">
                    <span class="log-time">14:23:45</span>
                    <span class="log-message">Market data stream connected</span>
                </div>
                <div class="log log-warning">
                    <span class="log-time">14:24:12</span>
                    <span class="log-message">Volume spike detected: TCS (+94.8%)</span>
                </div>
                <div class="log log-success">
                    <span class="log-time">14:24:33</span>
                    <span class="log-message">Alert triggered for RELIANCE</span>
                </div>
            </div>
        </div>

        <!-- Alert Builder -->
        <div class="panel alert-panel">
            <div class="panel-header">
                <h3>CREATE ALERT</h3>
            </div>
            <div class="alert-builder">
                <div class="form-group">
                    <label>Symbol</label>
                    <select id="alert-symbol" class="form-select">
                        <option>RELIANCE</option>
                        <option>TCS</option>
                        <option>HDFC BANK</option>
                        <option>INFY</option>
                        <option>ICICI BANK</option>
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Operator</label>
                        <select id="alert-operator" class="form-select">
                            <option value=">">></option>
                            <option value=">=">≥</option>
                            <option value="<"><</option>
                            <option value="<=">≤</option>
                        </select>
                    </div>
                    
                    <div class="form-group flex-grow">
                        <label>Compare To</label>
                        <select id="alert-right-type" class="form-select">
                            <option value="FIXED">Fixed Volume</option>
                            <option value="PREV_DAY">Prev Day Volume</option>
                            <option value="WEEKLY_AVG">Weekly Avg</option>
                            <option value="MONTHLY_AVG">Monthly Avg</option>
                            <option value="MULTIPLIER_WEEKLY">Weekly Avg ×</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Value / Multiplier</label>
                    <input id="alert-right-value" type="number" class="form-input" placeholder="Enter value">
                </div>

                <button class="btn-primary" onclick="createAlert()">
                    <span>CREATE ALERT</span>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 0l8 8-8 8V9H0V7h8V0z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Volume Comparison -->
        <div class="panel compare-panel">
            <div class="panel-header">
                <h3>COMPARE VOLUME</h3>
            </div>
            <div class="compare-builder">
                <div class="form-group">
                    <select id="compare-symbol" class="form-select">
                        <option>Select Symbol</option>
                        <option>RELIANCE</option>
                        <option>TCS</option>
                        <option>HDFC BANK</option>
                        <option>INFY</option>
                    </select>
                </div>
                <button class="btn-secondary" onclick="compareVolume()">
                    <span>ANALYZE</span>
                </button>
                <div id="compare-result" class="compare-result"></div>
            </div>
        </div>

    </div>
</div>

<!-- Chart Modal -->
<div id="chartModal" class="chart-modal hidden">
    <div class="chart-header">
        <div class="chart-title-section">
            <span id="chartTitle" class="chart-title">RELIANCE</span>
            <span class="chart-subtitle">Volume Analysis</span>
        </div>
        <button class="close-btn" onclick="closeChart()">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"/>
            </svg>
        </button>
    </div>
    <div id="chartContainer" class="chart-body"></div>
</div>

<script>
// Update time display
function updateTime() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('en-US', { hour12: false });
    document.getElementById('timeDisplay').textContent = timeString;
}
setInterval(updateTime, 1000);
updateTime();

// Placeholder functions
function createAlert() {
    console.log('Creating alert...');
}

function compareVolume() {
    console.log('Comparing volume...');
}

function openChart(symbol) {
    document.getElementById('chartModal').classList.remove('hidden');
    document.getElementById('chartTitle').textContent = symbol;
}

function closeChart() {
    document.getElementById('chartModal').classList.add('hidden');
}
</script>

</body>
</html>